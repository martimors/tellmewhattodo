{
  "listeners": {
    "*:80": {
      "pass": "routes"
    }
  },

  "routes": [
    {
      "match": {
        "uri": ["/api*"]
      },
      "action": {
        "pass": "applications/fastapi"
      }
    },
    {
      "match": {
        "uri": "/*"
      },
      "action": {
        "share": "/www/static$uri"
      }
    }
  ],
  "applications": {
    "fastapi": {
      "type": "python 3.12",
      "path": "/var/app",
      "module": "tellmewhattodo.api",
      "callable": "app"
    },
    "worker": {
      "type": "python 3.12",
      "path": "/var/app",
      "module": "tellmewhattodo.tasks",
      "callable": "run_celery_worker",
      "stdout": "/dev/stdout"
    }
  },
  "access_log": "/dev/stdout"
}
